{% extends 'base/base.html' %}
{% load i18n %}


{% block content %}
<h1 class="text-center border-bottom">Listado de reglas</h1>

{% if object_list %}
    <table id="datatable_listar" class="table table-striped table-hover table-sm">
        <thead class="thead-light">
            <tr scope="row">
                <td scope="col" colspan="100%" class="text-right">
                    <a class="btn btn-outline-success btn-sm" title="{% trans 'Añadir regla' %}"href="{% url 'reglas:reglas_crear'%}"><i class="fas fa-plus"></i> {% trans 'Añadir regla' %}</a>
                </td>
            </tr>
            <tr>
                <th class="row">
                    <div class="col">#</div>
                    <div class="col-4">Contenido</div>
                    <div class="col-3">Descripción</div>
                    <div class="col">Creación</div>
                    <div class="col">Modificación</div>
                    <div class="col">Usuarios asignados</div>
                    <div class="col">Acciones</div>

                </th>
            </tr>
        </thead>
        <tbody>
                {% for regla in object_list %}
                    <tr>
                        <td class="row">
                        <div class="col"><strong>{{ regla.id }}</strong></div>
                        <div class="col-4">{{ regla.contenido }}</div>
                        <div class="col-3">{{ regla.descripcion }}</div>
                        <div class="col">{{ regla.fechaCreacion|date:'Y-m-d H:i' }}</div>
                        <div class="col">{{ regla.fechaModificacion|date:'Y-m-d H:i' }}</div>
                        <div class="col">
                            <ul>
                            {% for usuario in regla.usuarios.all %}
                                <li>{{ usuario }}</li>
                            {% endfor %}
                            </ul>
                        </div>
                        <div class="col">
                            <a class="btn btn-warning btn-sm" title="{% trans 'Asignar' %}"href="{% url 'reglas:reglas_asignar' regla.id%}"><i class="fas fa-list-ol"></i></a>
                            <a class="btn btn-primary btn-sm" href="{% url 'reglas:reglas_edit' regla.id %}"><i class="fas fa-pen"></i></a>
                            <a class="btn btn-danger btn-sm" href="{% url 'reglas:reglas_delete' regla.id %}" onclick="return confirm ('{% trans '¿Estás seguro de que desea eliminar esta regla?' %}')"><i class="fas fa-trash"></i></a>
                        </div>
                        </td>
                    </tr>
                {% endfor %}
        </tbody>
    </table>
{% else %}
        <div class="alert alert-danger">No hay registros de reglas. <a href="{% url 'reglas:reglas_crear' %}" class="btn btn-outline-success">{%trans 'Añadir regla'%}</a></div></div>
{% endif %}

{% endblock %}
